<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lifevault</title>
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      color: #f5f5f5;
      background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0891b2 100%);
      padding: 2rem 1rem;
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.8);
    }

    p {
      font-size: 1.2rem;
      text-shadow: 1px 1px 4px rgba(0,0,0,0.7);
      margin-bottom: 2rem;
    }

    .circles-wrapper {
      display: flex;
      gap: 3rem;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .circle-container {
      position: relative;
      width: 200px;
      height: 200px;
      cursor: pointer;
      user-select: none;
    }

    .circle {
      position: absolute;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      border: 4px solid #3b82f6;
      background: rgba(15, 23, 42, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      font-weight: bold;
      color: #bfdbfe;
      transition: transform 0.2s, border-color 0.2s;
      overflow: hidden;
    }

    .circle:hover {
      transform: scale(1.05);
      border-color: #60a5fa;
    }

    .circle:active {
      transform: scale(0.98);
    }

    .water {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 0%;
      background: linear-gradient(180deg, #0ea5e9 0%, #0284c7 50%, #0369a1 100%);
      transition: height 0.1s linear;
      border-radius: 50%;
      z-index: 1;
    }

    .circle-text {
      position: relative;
      z-index: 2;
      text-align: center;
      padding: 15px;
      line-height: 1.3;
    }

    .breathing-circle {
      border-color: #10b981;
    }

    .breathing-circle:hover {
      border-color: #34d399;
    }

    .breathing-visual {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: radial-gradient(circle, #10b981, transparent);
      opacity: 0.3;
      transition: all 0.3s ease-in-out;
      z-index: 1;
    }

    .breathing-visual.inhale {
      width: 160px;
      height: 160px;
      opacity: 0.6;
      background: radial-gradient(circle, #34d399, #10b981);
    }

    .breathing-visual.exhale {
      width: 80px;
      height: 80px;
      opacity: 0.2;
      background: radial-gradient(circle, #059669, transparent);
    }

    .gratitude-circle {
      border-color: #f59e0b;
    }

    .gratitude-circle:hover {
      border-color: #fbbf24;
    }

    .gratitude-glow {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 140px;
      height: 140px;
      border-radius: 50%;
      background: radial-gradient(circle, #f59e0b, transparent);
      opacity: 0;
      transition: all 0.4s ease-in-out;
      z-index: 1;
    }

    .gratitude-glow.active {
      opacity: 0.5;
      width: 180px;
      height: 180px;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 0.3;
        transform: translate(-50%, -50%) scale(1);
      }
      50% {
        opacity: 0.6;
        transform: translate(-50%, -50%) scale(1.1);
      }
    }

    .instruction {
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #cbd5e1;
      text-align: center;
      max-width: 700px;
      line-height: 1.6;
    }

    @media (max-width: 768px) {
      .circles-wrapper {
        flex-direction: column;
        gap: 2rem;
      }
      h1 {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <h1>Lifevault</h1>
  <p>Welcome to my daily growth vault.</p>

  <div class="circles-wrapper">
    <div class="circle-container">
      <div class="circle breathing-circle" id="breathingCircle">
        <div class="breathing-visual" id="breathingVisual"></div>
        <div class="circle-text" id="breathingText">Hold to Breathe</div>
      </div>
    </div>

    <div class="circle-container">
      <div class="circle" id="circle">
        <div class="water" id="water"></div>
        <div class="circle-text" id="circleText">Hold to Enter</div>
      </div>
    </div>

    <div class="circle-container">
      <div class="circle gratitude-circle" id="gratitudeCircle">
        <div class="gratitude-glow" id="gratitudeGlow"></div>
        <div class="circle-text" id="gratitudeText">Hold for Gratitude</div>
      </div>
    </div>
  </div>

  <p class="instruction">
    <strong>Left:</strong> Breathing (30 breaths) • <strong>Center:</strong> Enter Vault (5s) • <strong>Right:</strong> Gratitude (3 prompts)
  </p>

  <script>
    const circle = document.getElementById('circle');
    const water = document.getElementById('water');
    const circleText = document.getElementById('circleText');
    let holdTimer = null;
    let fillInterval = null;
    const HOLD_DURATION = 5000;

    function startFilling() {
      let startTime = Date.now();
      fillInterval = setInterval(() => {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / HOLD_DURATION, 1);
        water.style.height = (progress * 100) + '%';
        const secondsLeft = Math.ceil((HOLD_DURATION - elapsed) / 1000);
        circleText.textContent = secondsLeft > 0 ? secondsLeft + 's' : 'Opening...';
      }, 50);
      holdTimer = setTimeout(() => { window.location.href = 'resources.html'; }, HOLD_DURATION);
    }

    function stopFilling() {
      if (holdTimer) clearTimeout(holdTimer);
      if (fillInterval) clearInterval(fillInterval);
      water.style.height = '0%';
      circleText.textContent = 'Hold to Enter';
    }

    circle.addEventListener('mousedown', (e) => { e.preventDefault(); startFilling(); });
    circle.addEventListener('mouseup', stopFilling);
    circle.addEventListener('mouseleave', stopFilling);
    circle.addEventListener('touchstart', (e) => { e.preventDefault(); startFilling(); });
    circle.addEventListener('touchend', stopFilling);

    const breathingCircle = document.getElementById('breathingCircle');
    const breathingVisual = document.getElementById('breathingVisual');
    const breathingText = document.getElementById('breathingText');
    let breathingInterval = null;
    let breathCount = 0;
    const MAX_BREATHS = 30;

    function startBreathing() {
      breathCount = 0;
      let isInhaling = true;
      let cycleStart = Date.now();
      breathingInterval = setInterval(() => {
        const elapsed = Date.now() - cycleStart;
        if (isInhaling) {
          breathingVisual.classList.add('inhale');
          breathingVisual.classList.remove('exhale');
          breathingText.textContent = `Inhale\n${breathCount}/${MAX_BREATHS}`;
          if (elapsed >= 500) { isInhaling = false; cycleStart = Date.now(); }
        } else {
          breathingVisual.classList.add('exhale');
          breathingVisual.classList.remove('inhale');
          breathingText.textContent = `Exhale\n${breathCount}/${MAX_BREATHS}`;
          if (elapsed >= 500) {
            isInhaling = true;
            cycleStart = Date.now();
            breathCount++;
            if (breathCount >= MAX_BREATHS) stopBreathing(true);
          }
        }
      }, 50);
    }

    function stopBreathing(completed = false) {
      if (breathingInterval) clearInterval(breathingInterval);
      breathingVisual.classList.remove('inhale', 'exhale');
      if (completed) {
        breathingText.textContent = 'Complete!\nRest & Breathe';
        setTimeout(() => { breathingText.textContent = 'Hold to Breathe'; }, 5000);
      } else {
        breathingText.textContent = 'Hold to Breathe';
      }
      breathCount = 0;
    }

    breathingCircle.addEventListener('mousedown', (e) => { e.preventDefault(); if (!breathingInterval) startBreathing(); });
    breathingCircle.addEventListener('mouseup', () => { if (breathCount < MAX_BREATHS) stopBreathing(false); });
    breathingCircle.addEventListener('mouseleave', () => { if (breathCount < MAX_BREATHS) stopBreathing(false); });
    breathingCircle.addEventListener('touchstart', (e) => { e.preventDefault(); if (!breathingInterval) startBreathing(); });
    breathingCircle.addEventListener('touchend', () => { if (breathCount < MAX_BREATHS) stopBreathing(false); });

    const gratitudeCircle = document.getElementById('gratitudeCircle');
    const gratitudeGlow = document.getElementById('gratitudeGlow');
    const gratitudeText = document.getElementById('gratitudeText');
    const prompts = [
      "Name someone who helped you grow", "What challenge taught you something today?", "What small victory did you have?",
      "What strength did you use today?", "What made you smile recently?", "Who showed you kindness today?",
      "What part of your body are you grateful for?", "What skill have you developed?", "What comfort do you have that others may not?",
      "What opportunity came your way?", "What lesson did failure teach you?", "What relationship brings you peace?",
      "What habit is improving your life?", "What do you love about where you live?", "What technology makes your life easier?",
      "What food nourished you today?", "What creative expression did you enjoy?", "What wisdom did you gain this week?"
    ];
    let gratitudeInterval = null;
    let promptIndex = 0;
    let selectedPrompts = [];

    function startGratitude() {
      selectedPrompts = [...prompts].sort(() => Math.random() - 0.5).slice(0, 3);
      promptIndex = 0;
      gratitudeGlow.classList.add('active');
      gratitudeText.textContent = selectedPrompts[0];
      promptIndex = 1;
      gratitudeInterval = setInterval(() => {
        if (promptIndex < 3) {
          gratitudeText.textContent = selectedPrompts[promptIndex];
          promptIndex++;
        } else {
          stopGratitude(true);
        }
      }, 3000);
    }

    function stopGratitude(completed = false) {
      if (gratitudeInterval) clearInterval(gratitudeInterval);
      gratitudeGlow.classList.remove('active');
      if (completed) {
        gratitudeText.textContent = 'Reflect on these...';
        setTimeout(() => { gratitudeText.textContent = 'Hold for Gratitude'; }, 3000);
      } else {
        gratitudeText.textContent = 'Hold for Gratitude';
      }
    }

    gratitudeCircle.addEventListener('mousedown', (e) => { e.preventDefault(); if (!gratitudeInterval) startGratitude(); });
    gratitudeCircle.addEventListener('mouseup', () => { if (promptIndex < 3) stopGratitude(false); });
    gratitudeCircle.addEventListener('mouseleave', () => { if (promptIndex < 3) stopGratitude(false); });
    gratitudeCircle.addEventListener('touchstart', (e) => { e.preventDefault(); if (!gratitudeInterval) startGratitude(); });
    gratitudeCircle.addEventListener('touchend', () => { if (promptIndex < 3) stopGratitude(false); });
  </script>
</body>
</html>
