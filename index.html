<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lifevault</title>
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      color: #f5f5f5;
      background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0891b2 100%);
      padding: 2rem 1rem;
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.8);
    }

    .tagline {
      font-size: 1.2rem;
      text-shadow: 1px 1px 4px rgba(0,0,0,0.7);
      margin-bottom: 2rem;
    }

    .circles-wrapper {
      display: flex;
      gap: 3rem;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .circle-container {
      position: relative;
      width: 200px;
      height: 200px;
      cursor: pointer;
      user-select: none;
    }

    .circle {
      position: absolute;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      border: 4px solid #3b82f6;
      background: rgba(15, 23, 42, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      font-weight: bold;
      color: #bfdbfe;
      transition: transform 0.2s, border-color 0.2s;
      overflow: hidden;
    }

    .circle:hover {
      transform: scale(1.05);
      border-color: #60a5fa;
    }

    .circle:active {
      transform: scale(0.98);
    }

    .water {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 0%;
      background: linear-gradient(180deg, #0ea5e9 0%, #0284c7 50%, #0369a1 100%);
      transition: height 0.1s linear;
      border-radius: 50%;
      z-index: 1;
    }

    .circle-text {
      position: relative;
      z-index: 2;
      text-align: center;
      padding: 15px;
      line-height: 1.3;
      font-size: 0.85rem;
    }

    /* Breathing circle styles */
    .breathing-circle {
      border-color: #10b981;
      background: rgba(15, 23, 42, 0.5);
    }

    .breathing-circle:hover {
      border-color: #34d399;
    }

    .breathing-visual {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: radial-gradient(circle, #10b981, transparent);
      opacity: 0.3;
      transition: all 0.3s ease-in-out;
      z-index: 1;
    }

    .breathing-visual.inhale {
      width: 160px;
      height: 160px;
      opacity: 0.6;
      background: radial-gradient(circle, #34d399, #10b981);
    }

    .breathing-visual.exhale {
      width: 80px;
      height: 80px;
      opacity: 0.2;
      background: radial-gradient(circle, #059669, transparent);
    }

    /* Gratitude circle styles */
    .gratitude-circle {
      border-color: #f59e0b;
      background: rgba(15, 23, 42, 0.5);
    }

    .gratitude-circle:hover {
      border-color: #fbbf24;
    }

    .gratitude-glow {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 140px;
      height: 140px;
      border-radius: 50%;
      background: radial-gradient(circle, #f59e0b, transparent);
      opacity: 0;
      transition: all 0.4s ease-in-out;
      z-index: 1;
    }

    .gratitude-glow.active {
      opacity: 0.5;
      width: 180px;
      height: 180px;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 0.3;
        transform: translate(-50%, -50%) scale(1);
      }
      50% {
        opacity: 0.6;
        transform: translate(-50%, -50%) scale(1.1);
      }
    }

    .instruction {
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #cbd5e1;
      text-align: center;
      max-width: 800px;
      line-height: 1.6;
    }

    @media (max-width: 768px) {
      .circles-wrapper {
        flex-direction: column;
        gap: 2rem;
      }
      
      h1 {
        font-size: 2rem;
      }
      
      .tagline {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <h1>Lifevault</h1>
  <p class="tagline">Welcome to my daily growth vault.</p>

  <div class="circles-wrapper">
    <!-- Breathing Circle -->
    <div class="circle-container" id="breathingContainer">
      <div class="circle breathing-circle" id="breathingCircle">
        <div class="breathing-visual" id="breathingVisual"></div>
        <div class="circle-text" id="breathingText">
          Hold to Breathe
        </div>
      </div>
    </div>

    <!-- Entrance Circle -->
    <div class="circle-container" id="circleContainer">
      <div class="circle" id="circle">
        <div class="water" id="water"></div>
        <div class="circle-text" id="circleText">
          Hold to Enter
        </div>
      </div>
    </div>

    <!-- Gratitude Circle -->
    <div class="circle-container" id="gratitudeContainer">
      <div class="circle gratitude-circle" id="gratitudeCircle">
        <div class="gratitude-glow" id="gratitudeGlow"></div>
        <div class="circle-text" id="gratitudeText">
          Hold for Gratitude
        </div>
      </div>
    </div>
  </div>

  <p class="instruction">
    <strong>Left:</strong> Breathing (30 breaths) • 
    <strong>Center:</strong> Enter Vault (hold 5s) • 
    <strong>Right:</strong> Gratitude Prompts
  </p>

  <script>
    // ==================== ENTRANCE CIRCLE ====================
    const circle = document.getElementById('circle');
    const water = document.getElementById('water');
    const circleText = document.getElementById('circleText');
    
    let holdTimer = null;
    let fillInterval = null;
    let startTime = 0;
    const HOLD_DURATION = 5000;

    function startFilling() {
      startTime = Date.now();
      
      fillInterval = setInterval(() => {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / HOLD_DURATION, 1);
        const fillHeight = progress * 100;
        
        water.style.height = fillHeight + '%';
        
        const secondsLeft = Math.ceil((HOLD_DURATION - elapsed) / 1000);
        if (secondsLeft > 0) {
          circleText.textContent = secondsLeft + 's';
        } else {
          circleText.textContent = 'Opening...';
        }
      }, 50);

      holdTimer = setTimeout(() => {
        window.location.href = 'resources.html';
      }, HOLD_DURATION);
    }

    function stopFilling() {
      if (holdTimer) {
        clearTimeout(holdTimer);
        holdTimer = null;
      }
      
      if (fillInterval) {
        clearInterval(fillInterval);
        fillInterval = null;
      }
      
      water.style.height = '0%';
      circleText.textContent = 'Hold to Enter';
    }

    circle.addEventListener('mousedown', (e) => {
      e.preventDefault();
      startFilling();
    });

    circle.addEventListener('mouseup', stopFilling);
    circle.addEventListener('mouseleave', stopFilling);

    circle.addEventListener('touchstart', (e) => {
      e.preventDefault();
      startFilling();
    });

    circle.addEventListener('touchend', stopFilling);
    circle.addEventListener('touchcancel', stopFilling);

    // ==================== BREATHING CIRCLE ====================
    const breathingCircle = document.getElementById('breathingCircle');
    const breathingVisual = document.getElementById('breathingVisual');
    const breathingText = document.getElementById('breathingText');

    let breathingInterval = null;
    let breathCount = 0;
    const MAX_BREATHS = 30;
    const BREATH_CYCLE_MS = 1000;
    const INHALE_MS = 500;
    const EXHALE_MS = 500;

    function startBreathing() {
      breathCount = 0;
      let isInhaling = true;
      let cycleStart = Date.now();

      breathingInterval = setInterval(() => {
        const elapsed = Date.now() - cycleStart;

        if (isInhaling) {
          breathingVisual.classList.add('inhale');
          breathingVisual.classList.remove('exhale');
          breathingText.textContent = `Inhale\n${breathCount}/${MAX_BREATHS}`;

          if (elapsed >= INHALE_MS) {
            isInhaling = false;
            cycleStart = Date.now();
          }
        } else {
          breathingVisual.classList.add('exhale');
          breathingVisual.classList.remove('inhale');
          breathingText.textContent = `Exhale\n${breathCount}/${MAX_BREATHS}`;

          if (elapsed >= EXHALE_MS) {
            isInhaling = true;
            cycleStart = Date.now();
            breathCount++;

            if (breathCount >= MAX_BREATHS) {
              stopBreathing(true);
            }
          }
        }
      }, 50);
    }

    function stopBreathing(completed = false) {
      if (breathingInterval) {
        clearInterval(breathingInterval);
        breathingInterval = null;
      }

      breathingVisual.classList.remove('inhale', 'exhale');
      
      if (completed) {
        breathingText.textContent = `Complete!\nRest & Breathe Normally`;
        setTimeout(() => {
          breathingText.textContent = 'Hold to Breathe';
        }, 5000);
      } else {
        breathingText.textContent = 'Hold to Breathe';
      }
      
      breathCount = 0;
    }

    breathingCircle.addEventListener('mousedown', (e) => {
      e.preventDefault();
      if (!breathingInterval) {
        startBreathing();
      }
    });

    breathingCircle.addEventListener('mouseup', (e) => {
      if (breathCount < MAX_BREATHS) {
        stopBreathing(false);
      }
    });

    breathingCircle.addEventListener('mouseleave', (e) => {
      if (breathCount < MAX_BREATHS) {
        stopBreathing(false);
      }
    });

    breathingCircle.addEventListener('touchstart', (e) => {
      e.preventDefault();
      if (!breathingInterval) {
        startBreathing();
      }
    });

    breathingCircle.addEventListener('touchend', (e) => {
      if (breathCount < MAX_BREATHS) {
        stopBreathing(false);
      }
    });

    breathingCircle.addEventListener('touchcancel', (e) => {
      if (breathCount < MAX_BREATHS) {
        stopBreathing(false);
      }
    });

    // ==================== GRATITUDE CIRCLE ====================
    const gratitudeCircle = document.getElementById('gratitudeCircle');
    const gratitudeGlow = document.getElementById('gratitudeGlow');
    const gratitudeText = document.getElementById('gratitudeText');

    const gratitudePrompts = [
      "Name someone who helped you grow",
      "What challenge taught you something today?",
      "What small victory did you have?",
      "What strength did you use today?",
      "What made you smile recently?",
      "Who showed you kindness today?",
      "What part of your body are you grateful for?",
      "What skill have you developed?",
      "What comfort do you have that others may not?",
      "What opportunity came your way?",
      "What lesson did failure teach you?",
      "What relationship brings you peace?",
      "What habit is improving your life?",
      "What do you love about where you live?",
      "What technology makes your life easier?",
      "What food nourished you today?",
      "What creative expression did you enjoy?",
      "What wisdom did you gain this week?"
    ];

    let gratitudeInterval = null;
    let selectedPrompts = [];
    let currentPromptIndex = 0;
    const PROMPTS_TO_SHOW = 3;
    const PROMPT_DISPLAY_TIME = 3000; // 3 seconds per prompt

    function getRandomPrompts(count) {
      const shuffled = [...gratitudePrompts].sort(() => Math.random() - 0.5);
      return shuffled.slice(0, count);
    }

    function startGratitude() {
      selectedPrompts = getRandomPrompts(PROMPTS_TO_
